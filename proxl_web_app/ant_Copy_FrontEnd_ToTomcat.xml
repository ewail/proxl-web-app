<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." name="Proxl Copy_FrontEnd_ToTomcat" default="copy-front-end">

	<!--  Build the 'front end' and copy to a Tomcat Deploy  -->
	
	<!--
	<property environment="env" />
	<property name="gradle.wrapper.executable" location="${env.GRADLE_HOME}/bin/gradle" />
	
	<echo>env:${env}</echo>
	<echo>env.GRADLE_HOME:${env.GRADLE_HOME}</echo>
	-->

	<property name="config_file" value="aa_ant_buildWar_CopyToTomcat.settings.properties" />
	
	<property name="config_file_with_path" 
		value="${config_file}"/>

	<fail message="ERROR: '${config_file}' file not found, check the path. filename with path: ${config_file_with_path}">
		<condition>
		    <not>
		    	<available file="${config_file_with_path}" />
		    </not>
		</condition>
	</fail>
	
	<echo>config_file_with_path: ${config_file_with_path}</echo>
	
	<!-- This does not fail if the file is not found -->
	<property file="${config_file_with_path}" />
	
	<echo>gradle.wrapper.executable: ${gradle.wrapper.executable}</echo>
	
	<echo>tomcat.webapps.root: ${tomcat.webapps.root}</echo>
	<echo>proxl.context: ${proxl.context}</echo>

	<property name="tomcat.proxl.webapp.root" value="${tomcat.webapps.root}${file.separator}${proxl.context}" />
	
	
	<property name="tomcat.css" value="${tomcat.proxl.webapp.root}${file.separator}css" />
	<property name="tomcat.images" value="${tomcat.proxl.webapp.root}${file.separator}images" />
	<property name="tomcat.js" value="${tomcat.proxl.webapp.root}${file.separator}js" />
	
	<property name="tomcat.jsp-includes" value="${tomcat.proxl.webapp.root}${file.separator}WEB-INF${file.separator}jsp-includes" />
	<property name="tomcat.jsp-pages" value="${tomcat.proxl.webapp.root}${file.separator}WEB-INF${file.separator}jsp-pages" />
	<property name="tomcat.jsp_template_fragments" value="${tomcat.proxl.webapp.root}${file.separator}WEB-INF${file.separator}jsp_template_fragments" />
	
	<target name="copy-front-end" description="">
		
	      <delete dir="${tomcat.css}"/>
	      <mkdir  dir="${tomcat.css}"/>
	      <delete dir="${tomcat.images}"/>
	      <mkdir  dir="${tomcat.images}"/>
	      <delete dir="${tomcat.js}"/>
	      <mkdir  dir="${tomcat.js}"/>
	      <delete dir="${tomcat.jsp-includes}"/>
	      <mkdir  dir="${tomcat.jsp-includes}"/>
	      <delete dir="${tomcat.jsp-pages}"/>
	      <mkdir  dir="${tomcat.jsp-pages}"/>
	      <delete dir="${tomcat.jsp_template_fragments}"/>
	      <mkdir  dir="${tomcat.jsp_template_fragments}"/>
	
		<copy todir="${tomcat.css}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}css" />
		</copy>			 
		<copy todir="${tomcat.images}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}images" />
		</copy>
		<copy todir="${tomcat.js}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}js" />
		</copy>			
		
		<copy todir="${tomcat.jsp-includes}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}WEB-INF${file.separator}jsp-includes" />
		</copy>			 
		<copy todir="${tomcat.jsp-pages}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}WEB-INF${file.separator}jsp-pages" />
		</copy>	
		<copy todir="${tomcat.jsp_template_fragments}" >
  		    <fileset dir="src${file.separator}main${file.separator}webapp${file.separator}WEB-INF${file.separator}jsp_template_fragments" />
		</copy>	
		
	</target>

</project>
